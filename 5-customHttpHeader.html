<!DOCTYPE html>
<html>
<head>
    <title>自定义http header</title>
    <script type="text/javascript" src="angular.js"></script>
</head>
<body ng-controller="Test">
{{random}}--{{value}}
<script type="text/javascript">
    var app=angular.module("app",[]);

    //method 1 1.0.x
    /*
    app.run(function($http){
        $http.defaults.headers.common["sdf"]="sdf";
    });
    */

    //method 2 1.1.x+

    app.factory("httpRequestInterceptor",function(){
        return{
            'request': function(config) {
                // do something on success
                config.headers={
                    "test":"test"
                };
                return config || $q.when(config);
            },
            'response': function(response) {
                // do something on success
                console.info(response.headers("test"));
                console.info(response.headers("test2"));
                return response || $q.when(response);
            }
        };
    });
    app.config(function($httpProvider){
        $httpProvider.interceptors.push("httpRequestInterceptor");
    });

    //以上两种方式都能正确的写入默认的header信息,建议使用第二中.
    //
    app.controller("Test",["$scope","$http",function($scope,$http){
        $scope.random=Math.random();
        $http.get("service/Handler.ashx").success(function(res){
            $scope.value=res;
        });
    }]);

    angular.bootstrap(document,["app"]);
</script>
</body>
</html>